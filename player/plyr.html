<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <script src="https://cdn.jsdelivr.net/npm/mousetrap@1.6.5/mousetrap.min.js" charset="utf-8"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/plyr@3.6.8/dist/plyr.css" />
    <script src="https://cdn.jsdelivr.net/npm/plyr@3.6.8/dist/plyr.polyfilled.js"></script>
    <style>
        body {
            background-color: black;
        }
        #video {
            position: absolute;
            top: 0px;
            right: 0px;
            bottom: 0px;
            left: 0px;
            margin: auto;
            max-height: 100%;
            max-width: 100%;
        }
    </style>
    <title>M3U8 Player running...</title>
</head>
<body>
    <video id="video" controls></video>
    <script>
        const player = new Plyr('#video');

        function playM3u8(url) {
            // 设置自定义标题
            document.title = "My Custom Video Title"; // 自定义标题

            if (Hls.isSupported()) {
                video.volume = 0.3;
                var hls = new Hls();
                var m3u8Url = decodeURIComponent(url);
                hls.loadSource(m3u8Url);
                hls.attachMedia(player.media); // 使用 Plyr 的媒体元素
                hls.on(Hls.Events.MANIFEST_PARSED, function () {
                    player.play(); // 使用 Plyr 的播放方法
                });
            } else if (video.canPlayType('application/vnd.apple.mpegurl')) {
                player.source = {
                    type: 'video',
                    sources: [{
                        src: url,
                        type: 'application/x-mpegURL'
                    }]
                };
                player.on('canplay', function () {
                    player.play(); // 使用 Plyr 的播放方法
                });
                video.volume = 0.3;
            }
        }

        // 示例：调用 playM3u8 函数，传入 M3U8 URL
        // playM3u8('your_m3u8_url_here');
    </script>
</body>
</html>
